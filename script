const form = document.getElementById('confession-form');
const input = document.getElementById('confession-input');
const list = document.getElementById('confession-list');

// Charger les confessions existantes
let confessions = JSON.parse(localStorage.getItem('confessions')) || [];
displayConfessions();

form.addEventListener('submit', (e) => {
  e.preventDefault();

  const text = input.value.trim();
  if (text === "") return;

  const newConfession = {
    text,
    date: new Date().toLocaleString()
  };

  confessions.unshift(newConfession); // ajouter en haut
  localStorage.setItem('confessions', JSON.stringify(confessions));

  input.value = "";
  displayConfessions();
});

function displayConfessions() {
  list.innerHTML = "";
  confessions.forEach(conf => {
    const li = document.createElement('li');
    li.innerHTML = `<p>${conf.text}</p><small>${conf.date}</small>`;
    list.appendChild(li);
  });
}
